{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  name: \"CK_XML\",\n\n  data() {\n    return {\n      img_url: [],\n      true_url: [],\n      img_show: false\n    };\n  },\n\n  methods: {\n    handleSuccess(response) {\n      console.log(response);\n\n      if (response.success) {\n        this.success(response.msg);\n        this.analyse(response.data);\n      } else {\n        this.warn(response.msg);\n      }\n    },\n\n    analyse(path) {\n      axios.get('/api/CKXml', {\n        params: {\n          path: path\n        }\n      }).then(response => {\n        console.log(response);\n\n        if (response.data.success) {\n          this.success(response.data.msg);\n          this.img_url = response.data.data;\n          this.true_url = [];\n\n          for (let i = 0; i < this.img_url.length; i++) {\n            this.getImage(this.img_url[i]);\n          }\n\n          this.img_show = true;\n        } else {\n          this.warn(\"文件格式无效，请修改后重试\");\n          this.img_show = false;\n        }\n      });\n    },\n\n    getImage(path) {\n      axios.get('/api/getImage', {\n        params: {\n          path: path\n        },\n        responseType: 'blob'\n      }).then(response => {\n        let url = window.URL.createObjectURL(response.data);\n        this.true_url.push(url);\n        console.log(url);\n      });\n    },\n\n    success(message) {\n      this.$message({\n        message: message,\n        type: 'success'\n      });\n    },\n\n    warn(message) {\n      this.$message({\n        message: message,\n        type: 'warning'\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAwBA;AAEA;AACAA,gBADA;;AAEAC;AACA;AACAC,iBADA;AAEAC,kBAFA;AAGAC;AAHA;AAKA,GARA;;AASAC;AACAC;AACAC;;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KATA;;AAUAC;AACAC;AACAC;AACAC;AADA;AADA,SAIAC,IAJA,CAIAC;AACAN;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA,SARA,MAQA;AACA;AACA;AACA;AACA,OAlBA;AAmBA,KA9BA;;AA+BAO;AACAL;AACAC;AACAC;AADA,SADA;AAIAI;AAJA,SAKAH,IALA,CAKAC;AACA;AACA;AACAN;AACA,OATA;AAUA,KA1CA;;AA2CAS;AACA;AACAC,wBADA;AAEAC;AAFA;AAIA,KAhDA;;AAiDAC;AACA;AACAF,wBADA;AAEAC;AAFA;AAIA;;AAtDA;AATA","names":["name","data","img_url","true_url","img_show","methods","handleSuccess","console","analyse","axios","params","path","then","response","getImage","responseType","success","message","type","warn"],"sourceRoot":"src/components","sources":["CK_XML.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>CK-XML</h1>\n    <el-upload\n        drag\n        action=\"/api/upload\"\n        accept=\".xml\"\n        :on-success=\"handleSuccess\"\n    >\n      <i class=\"el-icon-upload\"></i>\n      <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n      <div class=\"el-upload__tip\" slot=\"tip\">只能上传.xml文件</div>\n    </el-upload>\n\n    <el-image\n        v-if=\"img_show\"\n        style=\"width: 300px; height: 300px\"\n        :src=\"true_url[0]\"\n        :preview-src-list=\"true_url\">\n    </el-image>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"CK_XML\",\n  data () {\n    return {\n      img_url: [],\n      true_url:[],\n      img_show: false,\n    }\n  },\n  methods: {\n    handleSuccess (response) {\n      console.log(response)\n      if(response.success){\n        this.success(response.msg)\n        this.analyse(response.data)\n      }else{\n        this.warn(response.msg)\n      }\n    },\n    analyse(path){\n      axios.get('/api/CKXml', {\n        params: {\n          path:path\n        }\n      }).then(response=>{\n        console.log(response)\n        if(response.data.success){\n          this.success(response.data.msg)\n          this.img_url = response.data.data\n          this.true_url = []\n          for(let i=0;i<this.img_url.length;i++){\n            this.getImage(this.img_url[i])\n          }\n          this.img_show = true\n        }else{\n          this.warn(\"文件格式无效，请修改后重试\")\n          this.img_show = false\n        }\n      })\n    },\n    getImage(path){\n      axios.get('/api/getImage', {\n        params: {\n          path: path\n        },\n        responseType: 'blob'\n      }).then(response=>{\n        let url = window.URL.createObjectURL(response.data)\n        this.true_url.push(url);\n        console.log(url)\n      })\n    },\n    success(message) {\n      this.$message({\n        message: message,\n        type: 'success'\n      });\n    },\n    warn(message) {\n      this.$message({\n        message: message,\n        type: 'warning'\n      });\n    },\n  },\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}