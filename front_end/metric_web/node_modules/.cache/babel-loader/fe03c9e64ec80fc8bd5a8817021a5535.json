{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  name: \"CK_XML\",\n  data: function data() {\n    return {\n      img_url: [],\n      true_url: [],\n      img_show: false\n    };\n  },\n  methods: {\n    handleSuccess: function handleSuccess(response) {\n      console.log(response);\n\n      if (response.success) {\n        this.success(response.msg);\n        this.analyse(response.data);\n      } else {\n        this.warn(response.msg);\n      }\n    },\n    analyse: function analyse(path) {\n      var _this = this;\n\n      axios.get('/api/CKXml', {\n        params: {\n          path: path\n        }\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.data.success) {\n          _this.success(response.data.msg);\n\n          _this.img_url = response.data.data;\n          _this.true_url = [];\n\n          for (var i = 0; i < _this.img_url.length; i++) {\n            _this.getImage(_this.img_url[i]);\n          }\n\n          _this.img_show = true;\n        } else {\n          _this.warn(\"文件格式无效，请修改后重试\");\n\n          _this.img_show = false;\n        }\n      });\n    },\n    getImage: function getImage(path) {\n      var _this2 = this;\n\n      axios.get('/api/getImage', {\n        params: {\n          path: path\n        },\n        responseType: 'blob'\n      }).then(function (response) {\n        console.log(\"dat:\", response.data);\n        var url = window.URL.createObjectURL(response.data);\n\n        _this2.true_url.push(url);\n\n        console.log(\"picture:\", url);\n      });\n    },\n    success: function success(message) {\n      this.$message({\n        message: message,\n        type: 'success'\n      });\n    },\n    warn: function warn(message) {\n      this.$message({\n        message: message,\n        type: 'warning'\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AAEA;AACAA,gBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,iBADA;AAEAC,kBAFA;AAGAC;AAHA;AAKA,GARA;AASAC;AACAC,iBADA,yBACAC,QADA,EACA;AACAC;;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KATA;AAUAC,WAVA,mBAUAC,IAVA,EAUA;AAAA;;AACAC;AACAC;AACAF;AADA;AADA,SAIAG,IAJA,CAIA;AACAL;;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA,SARA,MAQA;AACA;;AACA;AACA;AACA,OAlBA;AAmBA,KA9BA;AA+BAM,YA/BA,oBA+BAJ,IA/BA,EA+BA;AAAA;;AACAC;AACAC;AACAF;AADA,SADA;AAIAK;AAJA,SAKAF,IALA,CAKA;AACAL;AAEA;;AACA;;AACAA;AACA,OAXA;AAYA,KA5CA;AA6CAQ,WA7CA,mBA6CAC,OA7CA,EA6CA;AACA;AACAA,wBADA;AAEAC;AAFA;AAIA,KAlDA;AAmDAC,QAnDA,gBAmDAF,OAnDA,EAmDA;AACA;AACAA,wBADA;AAEAC;AAFA;AAIA;AAxDA;AATA","names":["name","data","img_url","true_url","img_show","methods","handleSuccess","response","console","analyse","path","axios","params","then","getImage","responseType","success","message","type","warn"],"sourceRoot":"src/components","sources":["CK_XML.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>CK-XML</h1>\n    <el-upload\n        drag\n        action=\"/api/upload\"\n        accept=\".xml\"\n        :on-success=\"handleSuccess\"\n    >\n      <i class=\"el-icon-upload\"></i>\n      <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n      <div class=\"el-upload__tip\" slot=\"tip\">只能上传.xml文件</div>\n    </el-upload>\n\n    <el-image\n        v-if=\"img_show\"\n        style=\"width: 300px; height: 300px\"\n        :src=\"true_url[0]\"\n        :preview-src-list=\"true_url\">\n    </el-image>\n    <div class=\"block\">\n    <!-- <span class=\"demonstration\">默认 Hover 指示器触发</span> -->\n    <el-carousel height=\"150px\">\n      <el-carousel-item v-for=\"item in true_url\" :key=\"item\">\n        <h3 class=\"small\">{{ item }}</h3>\n      </el-carousel-item>\n    </el-carousel>\n  </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"CK_XML\",\n  data () {\n    return {\n      img_url: [],\n      true_url:[],\n      img_show: false,\n    }\n  },\n  methods: {\n    handleSuccess (response) {\n      console.log(response)\n      if(response.success){\n        this.success(response.msg)\n        this.analyse(response.data)\n      }else{\n        this.warn(response.msg)\n      }\n    },\n    analyse(path){\n      axios.get('/api/CKXml', {\n        params: {\n          path:path\n        }\n      }).then(response=>{\n        console.log(response)\n        if(response.data.success){\n          this.success(response.data.msg)\n          this.img_url = response.data.data\n          this.true_url = []\n          for(let i=0;i<this.img_url.length;i++){\n            this.getImage(this.img_url[i])\n          }\n          this.img_show = true\n        }else{\n          this.warn(\"文件格式无效，请修改后重试\")\n          this.img_show = false\n        }\n      })\n    },\n    getImage(path){\n      axios.get('/api/getImage', {\n        params: {\n          path: path\n        },\n        responseType: 'blob'\n      }).then(response=>{\n        console.log(\"dat:\",response.data)\n\n        let url = window.URL.createObjectURL(response.data)\n        this.true_url.push(url);\n        console.log(\"picture:\", url)\n      })\n    },\n    success(message) {\n      this.$message({\n        message: message,\n        type: 'success'\n      });\n    },\n    warn(message) {\n      this.$message({\n        message: message,\n        type: 'warning'\n      });\n    },\n  },\n}\n</script>\n\n\n<style>\n  .el-carousel__item h3 {\n    color: #475669;\n    font-size: 14px;\n    opacity: 0.75;\n    line-height: 150px;\n    margin: 0;\n  }\n\n  .el-carousel__item:nth-child(2n) {\n     background-color: #99a9bf;\n  }\n  \n  .el-carousel__item:nth-child(2n+1) {\n     background-color: #d3dce6;\n  }\n</style>"]},"metadata":{},"sourceType":"module"}